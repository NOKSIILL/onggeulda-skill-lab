<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Onggeulda Skills Lab - ë¦¬ë‹¤ì´ë ‰íŠ¸ ì¤‘...</title>

    <!-- SEO ë©”íƒ€ íƒœê·¸ -->
    <meta
      name="description"
      content="ë°˜ì‘ì†ë„, ê¸°ì–µë ¥, ìƒ‰ê° ë“± ë‹¤ì–‘í•œ ëŠ¥ë ¥ì„ ì¸¡ì •í•˜ê³  í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²Œì„ê³¼ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤."
    />
    <meta name="robots" content="index, follow" />

    <!-- hreflang íƒœê·¸ -->
    <link rel="alternate" hreflang="ko" href="https://your-domain.com/ko/" />
    <link rel="alternate" hreflang="en" href="https://your-domain.com/en/" />
    <link
      rel="alternate"
      hreflang="x-default"
      href="https://your-domain.com/ko/"
    />

    <!-- ìºë…¸ë‹ˆì»¬ URL -->
    <link rel="canonical" href="https://your-domain.com/" />

    <!-- íŒŒë¹„ì½˜ (ê¸°ì¡´ ê²ƒ ì‚¬ìš©) -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .loading-container {
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        padding: 40px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        max-width: 400px;
        width: 90%;
      }

      .logo {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #fff;
      }

      .spinner {
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top: 3px solid white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        font-size: 18px;
        margin: 20px 0 10px 0;
      }

      .loading-subtext {
        font-size: 14px;
        opacity: 0.8;
        margin-bottom: 20px;
      }

      .progress-bar {
        width: 100%;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4caf50, #45a049);
        border-radius: 2px;
        animation: progress 2s ease-in-out;
        transform-origin: left;
      }

      @keyframes progress {
        0% {
          transform: scaleX(0);
        }
        100% {
          transform: scaleX(1);
        }
      }

      /* ê°œë°œìš© ë””ë²„ê·¸ ì •ë³´ (ê°œë°œ ì¤‘ì—ë§Œ í‘œì‹œ) */
      .debug-info {
        position: fixed;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: #00ff00;
        padding: 10px;
        border-radius: 5px;
        font-family: "Courier New", monospace;
        font-size: 12px;
        display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        z-index: 9999;
      }

      .debug-info.show {
        display: block;
      }

      .manual-links {
        margin-top: 30px;
        display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
      }

      .manual-links.show {
        display: block;
      }

      .manual-links a {
        display: inline-block;
        margin: 5px;
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        text-decoration: none;
        border-radius: 20px;
        font-size: 12px;
        transition: all 0.3s ease;
      }

      .manual-links a:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <div class="loading-container">
      <div class="logo">Onggeulda Skills Lab</div>
      <div class="spinner"></div>
      <div class="loading-text">ì–¸ì–´ë¥¼ ê°ì§€í•˜ëŠ” ì¤‘...</div>
      <div class="loading-subtext">Detecting your preferred language...</div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>

      <!-- ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© ìˆ˜ë™ ë§í¬ë“¤ (ì¼ë°˜ ì‚¬ìš©ìì—ê²ŒëŠ” ë³´ì´ì§€ ì•ŠìŒ) -->
      <div class="manual-links" id="manualLinks">
        <div style="font-size: 10px; margin-bottom: 10px; opacity: 0.7">
          ê°œë°œ ëª¨ë“œ - ìˆ˜ë™ ì„ íƒ:
        </div>
        <a href="/ko/">ğŸ‡°ğŸ‡· í•œêµ­ì–´</a>
        <a href="/en/">ğŸ‡ºğŸ‡¸ English</a>
        <a href="javascript:localStorage.clear();location.reload();"
          >ğŸ”„ ì–¸ì–´ ì„¤ì • ì´ˆê¸°í™”</a
        >
      </div>
    </div>

    <!-- ê°œë°œìš© ë””ë²„ê·¸ ì •ë³´ -->
    <div class="debug-info" id="debugInfo">
      <div>ê°œë°œ ëª¨ë“œ í™œì„±</div>
      <div>ë¸Œë¼ìš°ì € ì–¸ì–´: <span id="debugBrowserLang">-</span></div>
      <div>ì €ì¥ëœ ì–¸ì–´: <span id="debugSavedLang">-</span></div>
      <div>ì„ íƒë  ì–¸ì–´: <span id="debugTargetLang">-</span></div>
    </div>

    <script>
      // ê°œë°œ ëª¨ë“œ í™•ì¸ (ê°œë°œ ì¤‘ì— í™œì„±í™”)
      const isDevelopmentMode =
        window.location.hostname === "localhost" ||
        window.location.hostname === "127.0.0.1" ||
        window.location.search.includes("debug=1") ||
        window.location.pathname.includes("index-lang.html");

      function detectAndRedirect() {
        // ë””ë²„ê·¸ ì •ë³´ ìš”ì†Œë“¤
        const debugInfo = document.getElementById("debugInfo");
        const manualLinks = document.getElementById("manualLinks");
        const debugBrowserLang = document.getElementById("debugBrowserLang");
        const debugSavedLang = document.getElementById("debugSavedLang");
        const debugTargetLang = document.getElementById("debugTargetLang");

        // ê°œë°œ ëª¨ë“œì—ì„œëŠ” ë””ë²„ê·¸ ì •ë³´ì™€ ìˆ˜ë™ ë§í¬ í‘œì‹œ
        if (isDevelopmentMode) {
          debugInfo.classList.add("show");
          manualLinks.classList.add("show");

          // 5ì´ˆ í›„ì— ìˆ˜ë™ ë§í¬ í‘œì‹œ (ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥)
          setTimeout(() => {
            manualLinks.style.display = "block";
          }, 2000);
        }

        // 1. URLì—ì„œ ì–¸ì–´ íŒŒë¼ë¯¸í„° í™•ì¸
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get("lang");

        // 2. ì €ì¥ëœ ì–¸ì–´ ì„¤ì • í™•ì¸
        const savedLang = localStorage.getItem("userLanguage");

        // 3. ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
        const browserLang = navigator.language || navigator.userLanguage;

        // ë””ë²„ê·¸ ì •ë³´ ì—…ë°ì´íŠ¸
        if (isDevelopmentMode) {
          debugBrowserLang.textContent = browserLang;
          debugSavedLang.textContent = savedLang || "ì—†ìŒ";
        }

        let targetLang = "ko"; // ê¸°ë³¸ê°’: í•œêµ­ì–´

        // ìš°ì„ ìˆœìœ„: URL > ì €ì¥ëœ ì„¤ì • > ë¸Œë¼ìš°ì € ì–¸ì–´
        if (urlLang === "en" || urlLang === "ko") {
          targetLang = urlLang;
          localStorage.setItem("userLanguage", targetLang);
        } else if (savedLang === "en" || savedLang === "ko") {
          targetLang = savedLang;
        } else if (browserLang.startsWith("en")) {
          targetLang = "en";
        }

        // ë””ë²„ê·¸ ì •ë³´ ì—…ë°ì´íŠ¸
        if (isDevelopmentMode) {
          debugTargetLang.textContent = targetLang;
          console.log("ì–¸ì–´ ê°ì§€ ê²°ê³¼:", {
            urlLang,
            savedLang,
            browserLang,
            targetLang,
            redirectUrl: `/${targetLang}/`,
          });
        }

        // ë¦¬ë‹¤ì´ë ‰íŠ¸ (ê°œë°œ ëª¨ë“œì—ì„œëŠ” ì‹œê°„ì„ ì¢€ ë” ì¤Œ)
        const redirectDelay = isDevelopmentMode ? 3000 : 1500;

        setTimeout(() => {
          window.location.replace(`/${targetLang}/`);
        }, redirectDelay);
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
      document.addEventListener("DOMContentLoaded", detectAndRedirect);

      // ê°œë°œìš© ë‹¨ì¶•í‚¤ (ê°œë°œ ëª¨ë“œì—ì„œë§Œ ì‘ë™)
      if (isDevelopmentMode) {
        document.addEventListener("keydown", function (e) {
          // Ctrl + D: ë””ë²„ê·¸ ì •ë³´ í† ê¸€
          if (e.ctrlKey && e.key === "d") {
            e.preventDefault();
            const debugInfo = document.getElementById("debugInfo");
            debugInfo.classList.toggle("show");
          }

          // Ctrl + K: í•œêµ­ì–´ë¡œ ê°•ì œ ì´ë™
          if (e.ctrlKey && e.key === "k") {
            e.preventDefault();
            localStorage.setItem("userLanguage", "ko");
            window.location.href = "/ko/";
          }

          // Ctrl + E: ì˜ì–´ë¡œ ê°•ì œ ì´ë™
          if (e.ctrlKey && e.key === "e") {
            e.preventDefault();
            localStorage.setItem("userLanguage", "en");
            window.location.href = "/en/";
          }

          // Ctrl + R: ì–¸ì–´ ì„¤ì • ë¦¬ì…‹
          if (e.ctrlKey && e.key === "r") {
            e.preventDefault();
            localStorage.removeItem("userLanguage");
            location.reload();
          }
        });

        console.log("ğŸ”§ ê°œë°œ ëª¨ë“œ í™œì„±í™”");
        console.log(
          "ë‹¨ì¶•í‚¤: Ctrl+D (ë””ë²„ê·¸), Ctrl+K (í•œêµ­ì–´), Ctrl+E (ì˜ì–´), Ctrl+R (ë¦¬ì…‹)"
        );
      }
    </script>

    <!-- ê²€ìƒ‰ì—”ì§„ì„ ìœ„í•œ ì–¸ì–´ë³„ ë§í¬ -->
    <noscript>
      <meta http-equiv="refresh" content="0; url=/ko/" />
      <p><a href="/ko/">í•œêµ­ì–´ë¡œ ì´ë™</a> | <a href="/en/">Go to English</a></p>
    </noscript>
  </body>
</html>
